# azurerm_api_management_custom_domain

Manages a API Management Custom Domain.## Disclaimers~> **Note:** It's possible to define Custom Domains both within [the `azurerm_api_management` resource](api_management.html) via the `hostname_configurations` block and by using this resource. However it's not possible to use both methods to manage Custom Domains within an API Management Service, since there will be conflicts.

## Example `component.hclt`

```hcl
source = {
   repo = "https://github.com/jumidev/terraform-modules-auto-azurerm.git"   
   path = "api_management/api_management_custom_domain"   
}

inputs = {
   # api_management_id â†’ set in component_inputs
}

component_inputs = {
   api_management_id = "path/to/api_management_component:id"   
}

tfstate_store = {
   storage_account = "${storage_account}"   
   container = "${container}"   
   container_path = "${COMPONENT_PATH}"   
}

```

## Required Variables

| Name | Type |  Description |
| ---- | --------- |  ----------- |
| **api_management_id** | string |  The ID of the API Management service for which to configure Custom Domains. Changing this forces a new API Management Custom Domain resource to be created. | 

## Optional Variables

| Name | Type |  Description |
| ---- | --------- |  ----------- |
| **developer_portal** | [block](#developer_portal-block-structure) |  One or more `developer_portal` blocks. | 
| **management** | [block](#management-block-structure) |  One or more `management` blocks. | 
| **portal** | [block](#portal-block-structure) |  One or more `portal` blocks. | 
| **gateway** | [block](#gateway-block-structure) |  One or more `gateway` blocks. | 
| **scm** | [block](#scm-block-structure) |  One or more `scm` blocks. | 

### `gateway` block structure

| Name | Type | Required? | Default | Description |
| ---- | ---- | --------- | ------- | ----------- |
| `host_name` | string | Yes | - | The Hostname to use for the API Proxy Endpoint. |
| `certificate` | string | No | - | The Base64 Encoded Certificate. (Mutually exclusive with 'key_vault_id'.) |
| `certificate_password` | string | No | - | The password associated with the certificate provided above. |
| `default_ssl_binding` | bool | No | False | Is the certificate associated with this Hostname the Default SSL Certificate? This is used when an SNI header isn't specified by a client. Defaults to 'false'. |
| `key_vault_id` | string | No | - | The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12. |
| `negotiate_client_certificate` | bool | No | False | Should Client Certificate Negotiation be enabled for this Hostname? Defaults to 'false'. |
| `ssl_keyvault_identity_client_id` | string | No | - | System or User Assigned Managed identity clientId as generated by Azure AD, which has 'GET' access to the keyVault containing the SSL certificate. |

### `portal` block structure

| Name | Type | Required? | Default | Description |
| ---- | ---- | --------- | ------- | ----------- |
| `host_name` | string | Yes | - | The Hostname to use for the corresponding endpoint. |
| `certificate` | string | No | - | The Base64 Encoded Certificate. (Mutually exclusive with 'key_vault_id'.) |
| `certificate_password` | string | No | - | The password associated with the certificate provided above. |
| `key_vault_id` | string | No | - | The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12. |
| `negotiate_client_certificate` | bool | No | False | Should Client Certificate Negotiation be enabled for this Hostname? Defaults to 'false'. |
| `ssl_keyvault_identity_client_id` | string | No | - | System or User Assigned Managed identity clientId as generated by Azure AD, which has 'GET' access to the keyVault containing the SSL certificate. |

### `management` block structure

| Name | Type | Required? | Default | Description |
| ---- | ---- | --------- | ------- | ----------- |
| `host_name` | string | Yes | - | The Hostname to use for the corresponding endpoint. |
| `certificate` | string | No | - | The Base64 Encoded Certificate. (Mutually exclusive with 'key_vault_id'.) |
| `certificate_password` | string | No | - | The password associated with the certificate provided above. |
| `key_vault_id` | string | No | - | The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12. |
| `negotiate_client_certificate` | bool | No | False | Should Client Certificate Negotiation be enabled for this Hostname? Defaults to 'false'. |
| `ssl_keyvault_identity_client_id` | string | No | - | System or User Assigned Managed identity clientId as generated by Azure AD, which has 'GET' access to the keyVault containing the SSL certificate. |

### `developer_portal` block structure

| Name | Type | Required? | Default | Description |
| ---- | ---- | --------- | ------- | ----------- |
| `host_name` | string | Yes | - | The Hostname to use for the corresponding endpoint. |
| `certificate` | string | No | - | The Base64 Encoded Certificate. (Mutually exclusive with 'key_vault_id'.) |
| `certificate_password` | string | No | - | The password associated with the certificate provided above. |
| `key_vault_id` | string | No | - | The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12. |
| `negotiate_client_certificate` | bool | No | False | Should Client Certificate Negotiation be enabled for this Hostname? Defaults to 'false'. |
| `ssl_keyvault_identity_client_id` | string | No | - | System or User Assigned Managed identity clientId as generated by Azure AD, which has 'GET' access to the keyVault containing the SSL certificate. |

### `scm` block structure

| Name | Type | Required? | Default | Description |
| ---- | ---- | --------- | ------- | ----------- |
| `host_name` | string | Yes | - | The Hostname to use for the corresponding endpoint. |
| `certificate` | string | No | - | The Base64 Encoded Certificate. (Mutually exclusive with 'key_vault_id'.) |
| `certificate_password` | string | No | - | The password associated with the certificate provided above. |
| `key_vault_id` | string | No | - | The ID of the Key Vault Secret containing the SSL Certificate, which must be should be of the type application/x-pkcs12. |
| `negotiate_client_certificate` | bool | No | False | Should Client Certificate Negotiation be enabled for this Hostname? Defaults to 'false'. |
| `ssl_keyvault_identity_client_id` | string | No | - | System or User Assigned Managed identity clientId as generated by Azure AD, which has 'GET' access to the keyVault containing the SSL certificate. |



## Outputs

| Name | Type | Sensitive? | Description |
| ---- | ---- | --------- | --------- |
| **id** | string | No  | The ID of the API Management Custom Domain. | 

Additionally, all variables are provided as outputs.
